!function(f){"use strict";var u="ht",E=f[u],F=E.Default,M=Math,K=(M.PI,M.sin,M.cos,M.atan2,M.sqrt,M.max),o=M.floor,L=(M.round,M.ceil),c=E.Shape,P=(E.Edge,E.List),W=E.Style,J=E.graph,t=F.getInternal(),m=t.ui(),j=null,q="prototype",$=f.clearInterval,y=f.setInterval,x=function(f){var N=f.data,y=this.dm();if(N&&"add"===f.kind){var k=y.$1c,S=N instanceof c?"shape.":"edge.";k&&N.s(S+"dash.flow")&&k.indexOf(N)<0&&k.push(N)}"clear"===f.kind&&(y.$1c=[])},X=function(E){var i=E.property,s=E.data,q=E.newValue,n=this.dm().$1c,e=s instanceof c?"s:shape.dash.flow":"s:edge.dash.flow";if(n&&i===e)if(q)n.indexOf(s)<0&&n.push(s);else for(var d=n.length,C=0;d>C;C++)if(n[C]===s){n.splice(C,1);break}},A=J.GraphView[q],B=m.EdgeUI[q],G=m.ShapeUI[q],i=G._80o,w=B._80o,z=E.DataModel[q],a=z.prepareRemove,T=A.setDataModel;W["edge.dash.flow.step"]==j&&(W["edge.dash.flow.step"]=3),W["shape.dash.flow.step"]==j&&(W["shape.dash.flow.step"]=3),z.prepareRemove=function(g){a.call(this,g);var s=g._dataModel,A=s.$1c;if(A)for(var R=A.length,p=0;R>p;p++)if(A[p]===g){A.splice(p,1);break}},A.setDataModel=function(e){var W=this,h=W._dataModel;if(h!==e){h&&(h.umm(x,W),h.umd(X,W),h.$1c=[]),e.mm(x,W),e.md(X,W);var b=e.$1c=[];e.each(function(V){var w=V instanceof c?"shape.":"edge.";V.s(w+"dash.flow")&&b.indexOf(V)<0&&b.push(V)}),T.call(W,e)}},A.setDashFlowInterval=function(t){var w=this,o=w.$2c;w.$2c=t,w.fp("dashFlowInterval",o,t),w.$3c!=j&&($(w.$3c),delete w.$3c,w.enableDashFlow(t))},A.getDashFlowInterval=function(){return this.$2c},A.$4c=function(){var b,M,p,I=this,d=I.tx(),J=I.ty(),R=I._zoom,H=I.getWidth(),k=I.getHeight(),U={x:-d/R,y:-J/R,width:H/R,height:k/R},B=I.dm().$1c,g=I._56I,w=new P;if(B.forEach(function(k){g[k.getId()]&&(b=I.getDataUI(k),b&&(p=b._79o(),p&&w.add(p)))}),0!==w.size()&&(w.each(function(W){F.intersectsRect(U,W)&&(M=F.unionRect(M,W))}),M&&(M&&(F.grow(M,K(1,1/R)),M.x=o(M.x*R)/R,M.y=o(M.y*R)/R,M.width=L(M.width*R)/R,M.height=L(M.height*R)/R,M=F.intersection(U,M)),M))){var s=I._canvas.getContext("2d");s.save(),s.lineCap=F.lineCap,s.lineJoin=F.lineJoin,t.translateAndScale(s,d,J,R),s.beginPath(),s.rect(M.x,M.y,M.width,M.height),s.clip(),s.clearRect(M.x,M.y,M.width,M.height),I.$5c(s,M),s.restore()}},A.$5c=function(l,h){var B,y,M=this;M._93db(l),M.each(function(v){M._56I[v._id]&&(B=M.getDataUI(v),B&&(y=B._79o(),(!h||F.intersectsRect(h,y))&&(B.$7c=!0,B._42(l),delete B.$7c)))}),M._92db(l)},A.enableDashFlow=function(q){var O=this;O.$3c==j&&(O.$3c=y(function(){O.$4c()},q||O.$2c||50))},A.disableDashFlow=function(){var f=this;$(f.$3c),delete f.$3c};var U=function(){var y=this,i=y._data,q=i instanceof c?"shape.":"edge.",K=i.s(q+"dash.pattern"),v=i.s(q+"dash.flow.reverse");if(K&&i.s(q+"dash")&&i.s(q+"dash.flow")&&y.$7c){var x=y.s(q+"dash.offset")||0,m=i.s(q+"dash.flow.step"),h=i.getStyleMap(),I=0;K.forEach(function(y){I+=y}),v&&(m=-m),x-=m,x%=I,h||(i._styleMap=h={}),h[q+"dash.offset"]=x}};B._80o=function(L){w.call(this,L),U.call(this)},G._80o=function(y){i.call(this,y),U.call(this)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);