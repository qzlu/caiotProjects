!function(t,G){"use strict";var K="ht",T=t[K],O="position",Q="absolute",i="px",s="left",m="top",S="innerHTML",f="className",e="width",g="height",F="0",R="display",X="none",k="visibility",V="user-select",Y="margin",C="padding",_=null,w=T.Color,M=T.Default,E=M.getInternal(),I=t.setTimeout,$=t.setInterval,d=t.clearTimeout,L=t.clearInterval,u=t.parseInt,U=M.isLeftButton,h=M.isDragging,y=M.startDragging,v=M.getDistance,D=M.isTouchable,j=w.widgetIconHighlight,x=w.widgetIconBorder,p=w.widgetIconGradient,o=function(){return document},P=function(b,W){return b.querySelectorAll(W)},B=function(Z){var n=o().createElement(Z);return"ul"===Z&&(c(n,O,"relative"),c(n,Y,F),c(n,C,F),c(n,"list-style",X),c(n,"box-sizing","border-box"),c(n,"-moz-box-sizing","border-box"),c(n,R,"inline-block"),c(n,"vertical-align","text-bottom"),c(n,"border","1px solid "+M.contextMenuBorderColor),c(n,"box-shadow","0 0 16px 1px "+M.contextMenuShadowColor),c(n,"overflow","hidden"),M.contextMenuBorderRadius&&c(n,"border-radius",M.contextMenuBorderRadius+i)),n},W=function(W){var Y=W.touches[0];return Y?Y:W.changedTouches[0]},J=function(){return B("div")},n=function(){return B("canvas")},c=function(l,O,j){l.style.setProperty(O,j,_)},b=function(u,z,_){M.def(T.widget[u],z,_)},l=function(k,R){k.appendChild(R)},a=function(I,y){I.removeChild(y)},N=M.eventListenerOptionsFalse,r=(M.eventListenerOptionsTrue,function(h,r,y,Q){h.addEventListener(r,y,Q?N:N)}),z=function(p,P,C,l){p.removeEventListener(P,C,l?N:N)};E.addMethod(M,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:x},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:j}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:x},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:j,gradient:M.imageGradient,gradientColor:p,background:j}]},contextMenuLabelFont:(D?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"▶"},!0);var A=function(s){var e=this,X=s._view;if(e.$11b=s,e.addListeners(),r(X,"contextmenu",function(i){i.preventDefault()}),!D){var F=e.$37b=e.$36b.bind(e);r(X,"mouseover",F),r(X,"mouseout",F)}};M.def(A,G,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(R){if(M.preventDefault(R),U(R)){for(var b=this,A=b.$11b,L=b.getView(),N=L.children,K=0;K<N.length;K++){var T=N[K],t=T.$24b,g=T.$25b;if(t&&t.contains(R.target))return A.scrollUp(T),b.$28b=I(function(){b.$29b=$(function(){A.scrollUp(T)},100)},500),y(b,R),void 0;if(g&&g.contains(R.target))return A.scrollDown(T),b.$28b=I(function(){b.$29b=$(function(){A.scrollDown(T)},100)},500),y(b,R),void 0}D&&(R=W(R)),b.$30b={x:R.pageX,y:R.pageY}}},handle_mousedown:function(y){this.handle_touchstart(y)},handle_touchend:function(h){if(U(h)){var A=this,l=A.$30b,N=D?{x:W(h).pageX,y:W(h).pageY}:{x:h.pageX,y:h.pageY};if(!l||v(l,N)>1)return delete A.$30b,void 0;for(var p=A.getView(),d=A.$11b,j=h.target,B=_,e=_,O=d._items,m=p.$26b,E=0;E<m.length;E++)if(e=m[E],e.contains(j)){B=e.getAttribute("data-id");break}if(B&&O){var o=d.$17b(O,function(X){return X._id===B});if(o){var u=!1;o.disabled instanceof Function?u=o.disabled.call(d,o):o.disabled===!0&&(u=!0),u||(o.items?D&&A.$36b(e,!0):d.$1b(o,h))}}delete A.$30b}},$36b:function(S,E){if(!h()){var q,C=this,K=C.$11b,B=C.getView(),L=K.$20b||B.children[0],d=K.$19b,$=B.$26b,o=B.children,z=S.target,F=B.getBoundingClientRect(),t=M.getWindowInfo(),l=t.width,r=t.height,U=function(y){for(var $=0;$<o.length;$++){var e=o[$],m=new RegExp(y+"$"),Y=e[f];if(Y&&(m.test(Y)||Y.indexOf(y+" ")>=0))return e}},I=function(I){for(var L=0;L<$.length;L++){var i=$[L],G=new RegExp(I+"$"),D=i[f];if(D&&(G.test(D)||D.indexOf(I+" ")>=0))return i}},G=function(N){var y=I("menu-item"+N.$45b),V=y.getBoundingClientRect(),B=V.top-F.top,O=V.left-F.left;c(N,m,B+i),c(N,s,O+V.width+i);var z=N.getBoundingClientRect(),u=z.top,e=z.left,H=z.height,X=z.width,t=u+H+2,q=e+X+2;t>r&&c(N,m,B+r-t+i),q>l&&c(N,s,O-X+i)};if(E)q=S;else{if("mouseover"===S.type){for(var V=0;V<$.length;V++){var j=$[V];if(j.contains(z)){q=j;break}}if(!q&&d){var D=d.parentNode,y=U("submenu"+d.getAttribute("data-id"));(y&&y.contains(z)||D&&D.contains(z))&&(q=d)}}else if("mouseout"===S.type){for(var O=!1,w=S.relatedTarget,V=0;V<o.length;V++){var Q=o[V];if("hidden"!==Q.style.visibility&&Q.contains(w)){O=!0;break}}if(O)return}!q&&L&&(q=I("menu-item"+(L.$45b||"NaN")))}if(q!=d){if(d)for(var g=d;g;){if(g[f]=g[f].replace(" menu-item-hover",""),g[f].indexOf("disabled")<0){var A=K.getItemByProperty("_id",g.getAttribute("data-id"));null!=A.background?A.background instanceof Function?c(g,"background-color",A.background.call(K,A)):c(g,"background-color",A.background):c(g,"background-color",M.contextMenuBackground),c(g,"color",M.contextMenuLabelColor)}var P=U("submenu"+g.getAttribute("data-id"));P&&c(P,k,"hidden");var J=g.parentNode;g=I("menu-item"+(J.$45b||"NaN"))}if(q){for(var n=q,e=[];n;){n[f]+=" menu-item-hover",n[f].indexOf("disabled")<0&&(c(n,"background-color",M.contextMenuHoverBackground),c(n,"color",M.contextMenuHoverLabelColor));var v=U("submenu"+n.getAttribute("data-id"));v&&(c(v,k,"visible"),e.push(v));var J=n.parentNode;n=I("menu-item"+(J.$45b||"NaN"))}e.reverse(),e.forEach(function(T){G(T)})}}K.$19b=q,K.$20b=q?q.parentNode:B.children[0]}},handle_mouseup:function(e){this.handle_touchend(e)},handleWindowTouchEnd:function(){var c=this;c.$28b!=_&&(d(c.$28b),delete c.$28b),c.$29b!=_&&(L(c.$29b),delete c.$29b),delete c.$34b,delete c.$30b,delete c.$35b},handleWindowMouseUp:function(l){this.handleWindowTouchEnd(l)},handle_mousemove:function(r){this.handle_touchmove(r)},handle_touchmove:function(E){if(!h()&&U(E)){for(var d=this,H=d.getView().children,I=_,Y=0;Y<H.length;Y++){var u=H[Y];if(u.contains(E.target)){I=u;break}}var R=d.$30b,N=D?{x:W(E).pageX,y:W(E).pageY}:{x:E.pageX,y:E.pageY};I&&R&&v(R,N)>2&&(y(d,E),d.$34b=I,d.$35b=I.$18b)}},handleWindowTouchMove:function(l){l.preventDefault();var u=this,g=u.$11b,C=u.$34b,d=u.$35b,A=u.$30b;if(A&&C){var w=D?{x:W(l).pageX,y:W(l).pageY}:{x:l.pageX,y:l.pageY},q=w.y-A.y;q>0?g.scrollUp(C,C.$18b-(d-q)):g.scrollDown(C,d-q-C.$18b)}},handleWindowMouseMove:function(z){this.handleWindowTouchMove(z)},$10b:function(S,j){S.preventDefault();for(var W=this,O=W.getView().children,X=_,E=0;E<O.length;E++){var b=O[E];if(b.contains(S.target)){X=b;break}}if(X){var v=this.$11b,z=v.getRowHeight();Math.abs(j)>.05&&(j>0?v.scrollUp(X,j*z):0>j&&v.scrollDown(X,-j*z))}},handle_mousewheel:function(a){this.$10b(a,a.wheelDelta/40)},handle_DOMMouseScroll:function(D){this.$10b(D,-D.detail)},$44b:function(J){this.getView().contains(J.target)||this.$11b.hide()},$41b:function(I){this.$11b.show(I)},$4b:function(E,K){var Q=this.$11b;if(K=K||Q._items,K&&K.length&&E.keyCode){var V=[E.keyCode];E.shiftKey&&V.push(16),E.ctrlKey&&V.push(17),E.altKey&&V.push(18),/mac/.test(t.navigator?t.navigator.userAgent.toLowerCase():"")?E.metaKey&&V.push(17):E.metaKey&&V.push(91),V.sort();var L=V.join(),P=Q.$17b(K,function(t){if(t.key){var B=t.key.slice(0);return B.sort(),L===B.join()}});if(P){P.preventDefault!==!1&&E.preventDefault();var h=!1;P.disabled instanceof Function?h=P.disabled.call(Q,P):P.disabled===!0&&(h=!0),h||Q.$1b(P,E)}}},$39b:function(r){var I=this,Q=W(r);I.$32b={x:Q.pageX,y:Q.pageY}},$38b:function(w){var b=this,Z=W(w);b.$31b={x:Z.pageX,y:Z.pageY},b.$33b=I(function(){b.$31b&&(b.$32b?v(b.$31b,b.$32b)<10&&b.$11b.show(w):b.$11b.show(w)),delete b.$33b,delete b.$31b,delete b.$32b},600)},$40b:function(){var b=this;b.$33b!=_&&(d(b.$33b),delete b.$33b,delete b.$31b,delete b.$32b)}}),T.widget.ContextMenu=function(N){var o=this,y=o._view=E.createView(null,o);y[f]="ht-widget-contextmenu",o.setItems(N),o.$13b=new A(o),c(y,"font",M.contextMenuLabelFont),c(y,O,Q),c(y,"cursor","default"),c(y,"-webkit-"+V,X),c(y,"-moz-"+V,X),c(y,"-ms-"+V,X),c(y,V,X),c(y,"box-sizing","border-box"),c(y,"-moz-box-sizing","border-box"),M.baseZIndex!=_&&c(y,"z-index",u(M.baseZIndex)+2+""),o.$3b=function(s){o.$13b.$4b(s)}},b("ContextMenu",G,{$5b:0,_items:_,$21b:_,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var f=this,X=f._enableGlobalKey;X===!1&&(r(o(),"keydown",f.$3b),f._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,z(o(),"keydown",this.$3b)},setItems:function(o){this._items=o},getItems:function(){return this._items},setVisibleFunc:function(D){this.$16b=D},setLabelMaxWidth:function(j){this.$43b=j},$1b:function(f,I){var L=this;if("check"===f.type)f.selected=!f.selected;else if("radio"===f.type){var o=f.groupId;L.$17b(L._items,function(c){c.groupId===o&&(c.selected=!1)}),f.selected=!0}if(L.hide(),f.action)f.action.apply(f.scope||L,[f,I]);else if(f.href){var U=f.linkTarget||"_self";t.open(f.href,U)}},getItemById:function(n){return this.getItemByProperty("id",n)},setItemVisible:function(Y,Z){var C=this.getItemById(Y);C&&(C.visible=Z)},getItemByProperty:function(l,g,m){var e=this;if(m=m||e._items,!m||0===m.length)return _;var X=e.$17b(m,function(P){return P[l]===g});return X||_},scrollUp:function(B,r){var M=this;if(r=r==_?20:r,r=u(r),0!==r){var Y=0;B.$18b>r&&(Y=B.$18b-r),M.$42b(B,Y),B.scrollTop=Y,B.$18b=Y}},scrollDown:function(y,T){var F=this;if(T=T==_?20:T,T=u(T),0!==T){var g=y.$22b,Z=y.$23b,w=g-Z;Z+y.$18b+T<g&&(w=y.$18b+T),F.$42b(y,w),y.scrollTop=w,y.$18b=w}},$42b:function(D,H){H=H==_?D.$18b:H;var h=D.$24b,y=D.$25b;h&&(c(h,"top",H+i),0==H?c(h,R,X):c(h,R,"block")),y&&(c(y,"bottom",-H+i),H==D.$22b-D.$23b?c(y,R,X):c(y,R,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(m,t){for(var c=0;c<m.length;c++){var N=m[c];if(t(N))return N;if(N.items){var w=this.$17b(N.items,t);if(w)return w}}},$2b:function(W,H){for(var s=this,r=0;r<W.length;r++){s.$5b++;var Z=W[r];if(Z.visible!==!1&&!(M.isFunction(Z.visible)&&Z.visible()===!1||s.$16b&&!s.$16b.call(s,Z))){var L=B("li"),p=s.$5b+"";if(c(L,"white-space","nowrap"),c(L,R,"block"),"separator"===Z||Z.separator===!0){var U=J();U[f]="separator",c(U,g,M.contextMenuSeparatorWidth+i),c(U,"background",M.contextMenuSeparatorColor),l(L,U)}else{Z._id=p,L.setAttribute("data-id",p);var X=B("span"),$=B("span"),b=n(),I=J();if(c(X,R,"inline-block"),c(X,g,"1.2em"),c($,R,"inline-block"),c($,g,"1.2em"),c($,"line-height","1.2em"),b[f]="prefix",c(b,R,"inline-block"),c(b,e,"1em"),c(b,g,"1em"),c(b,"vertical-align","middle"),c(b,Y,"0 0.2em"),"check"===Z.type&&Z.selected?b[f]+=" check-prefix":"radio"===Z.type&&Z.selected&&(b[f]+=" radio-prefix"),l(L,b),Z.icon){var V=n();V[f]="contextmenu-item-icon",c(V,R,"inline-block"),c(V,g,"1.2em"),c(V,e,"1.2em"),c(V,"margin-right","0.2em"),c(V,"float","left"),V.$50b=Z.icon,V._item=Z,l(X,V)}if($[S]=Z.label,l(X,$),l(L,X),I[f]="suffix",c(I,R,"inline-block"),c(I,"margin-left","1em"),c(I,"margin-right","0.4em"),c(I,"text-align","right"),c(I,"font-size","75%"),Z.items&&(I[S]=M.contextMenuSubmenuMark),Z.suffix&&(I[S]=Z.suffix),l(L,I),L[f]="menu-item menu-item"+p,null!=Z.background?Z.background instanceof Function?c(L,"background-color",Z.background.call(s,Z)):c(L,"background-color",Z.background):c(L,"background-color",M.contextMenuBackground),c(L,"color",M.contextMenuLabelColor),c(L,C,"3px 0"),Z.disabled instanceof Function){var q=Z.disabled.call(s,Z);q&&(L[f]+=" disabled",c(L,"color",M.contextMenuDisabledLabelColor))}else Z.disabled&&(L[f]+=" disabled",c(L,"color",M.contextMenuDisabledLabelColor));if(Z.items){s.$21b||(s.$21b=new T.List);var o=B("ul");o[f]="submenu"+p,o.$45b=p,c(o,k,"hidden"),c(o,O,Q),l(s._view,o),s.$21b.add(o),s.$2b(Z.items,o)}}l(H,L)}}},rebuild:function(){var J=this,i=J._items,h=J._view;if(h&&(h[S]="",J.$21b=_,J.$5b=0,J.$19b=_,J.$20b=_,h.$26b=_,i&&0!==i.length)){var z=B("ul",J._r);l(h,z),J.$2b(i,z)}},addTo:function(U){if(U){var H=this,d=H.$13b;if(H.$12b=U,H.$9b=function(j){d.$44b(j)},H.$27b=function(N){d.$41b(N)},D){var O=H.$6b=function(b){d.$38b(b)},x=H.$7b=function(F){d.$39b(F)},W=H.$8b=function(J){d.$40b(J)};r(U,"touchstart",O,!0),r(U,"touchmove",x),r(U,"touchend",W)}else r(U,"contextmenu",H.$27b)}},showOnView:function(F,l,D){F=F.getView?F.getView():F;var p=M.getWindowInfo(),$=F.getBoundingClientRect();this.show($.left+p.left+l,$.top+p.top+D)},show:function(X,$,x){var Y=this,x=x==_?!0:!1,g=Y._view;if(g){if(Y.invalidate(),1===arguments.length){var L=X;if(D){var k=W(L);X=k.pageX,$=k.pageY}else X=L.pageX,$=L.pageY}var u=M.getWindowInfo(),q=u.width,p=u.height,A=u.left,B=u.top,U={pageX:X,pageY:$,clientX:X-A,clientY:$-B,target:1,originEvent:L},N=U.clientX,w=U.clientY,v=function(k){k.style.height=p-6+i;var b=J(),z=J(),X=function(D){c(D,O,Q),c(D,"text-align","center"),c(D,e,"100%"),c(D,"font-size",10+i),c(D,"padding","2px 0"),c(D,"border","0px solid "+M.contextMenuScrollerBorderColor),c(D,"background-color",M.contextMenuScrollerColor1),D.style.backgroundImage="-webkit-linear-gradient(top, "+M.contextMenuScrollerColor1+", "+M.contextMenuScrollerColor2+")",D.style.backgroundImage="linear-gradient(to bottom, "+M.contextMenuScrollerColor1+", "+M.contextMenuScrollerColor2+")"};b[f]="menu-arrow-item menu-arrow-item-top",z[f]="menu-arrow-item menu-arrow-item-bottom",X(b),c(b,"top",F),c(b,"left",F),c(b,"border-bottom-width",1+i),b[S]="▲",X(z),c(z,"bottom",F),c(z,"left",F),c(z,"border-top-width",1+i),z[S]="▼",k.$24b=b,k.$25b=z,k.$18b=k.scrollTop,k.$22b=k.scrollHeight,k.$23b=k.clientHeight,l(k,b),l(k,z),Y.$42b(k)};Y.beforeShow&&Y.beforeShow(U);var j=Y._items;if(j&&(L&&L.preventDefault(),j.length)){Y.rebuild(),M.appendToScreen(g),g.$26b=P(g,".menu-item");var b=g.children[0];b.offsetHeight>p&&v(b);var t=w+(x?1:0),C=N+(x?1:0),z=function(W){for(var $=0,w=0,B=0,Z=Y.$43b;B<W.children.length;B++){var N=W.children[B];if(N.getAttribute("data-id")){var H=N.children[1],v=N.children[2],l=H.children;if(Z){var _=l[0];l.length>1&&(_=l[1]),_.offsetWidth>Z&&(_[S]="<marquee scrollamount='3'>"+_[S]+"</marquee>",_.children[0].style.verticalAlign="text-bottom",c(_,e,Z+i),c(_,R,"inline-block"))}var r=H.offsetWidth,g=v.offsetWidth;r>$&&($=r),g>w&&(w=g)}}for(B=0;B<W.children.length;B++){var N=W.children[B];if(N.getAttribute("data-id")){var H=N.children[1],v=N.children[2],a=H.children[0],G=H.children[1];!G&&a.style.width&&c(a,e,$+i),c(H,e,$+i),c(v,e,w+i)}}};z(b);var a=w+3+g.offsetHeight,G=N+3+g.offsetWidth;a>p?c(g,m,t-(a-p)+B+i):c(g,m,t+B+i),G>q?c(g,s,C-(G-q)+A+i):c(g,s,C+A+i);var E=Y.$21b;E&&E.each(function(j){z(j),j.offsetHeight>p&&v(j)}),Y.$9b&&r(o(),D?"touchstart":"mousedown",Y.$9b,!0),Y.afterShow&&Y.afterShow(U),Y.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=_:!1},getRelatedView:function(){return this.$12b},hide:function(){var P=this,j=P._view;j&&j.parentNode&&(a(j.parentNode,j),z(o(),D?"touchstart":"mousedown",P.$9b,!0),P.afterHide&&P.afterHide())},dispose:function(){var t=this,m=t.$12b,Q=t._view;Q&&(Q.parentNode&&a(Q.parentNode,Q),t.disableGlobalKey(),m&&(D?(z(m,"touchstart",t.$6b,!0),z(m,"touchmove",t.$7b),z(m,"touchend",t.$8b)):z(m,"contextmenu",t.$27b)),t._view=t._items=t.$21b=t.$19b=t.$12b=t.beforeShow=t.afterShow=t.afterHide=t.$9b=t.$3b=t.$6b=t.$7b=t.$8b=t.$27b=_)},$46b:function(o,d,n,r,g){var s=E.initContext(o);E.translateAndScale(s,0,0,1),s.clearRect(0,0,n,r),M.drawStretchImage(s,M.getImage(d),"fill",0,0,n,r,g,this),s.restore()},$47b:function(){var i,G,F,D=this,H=D._view;if(D.isShowing()){var n=P(H,".check-prefix");for(F=0;F<n.length;F++){var K=n[F];i=K.clientWidth,G=K.clientHeight,K.$48b=i,K.$49b=G,E.setCanvas(K,i,G)}var I=P(H,".radio-prefix");for(F=0;F<I.length;F++){var p=I[F];i=p.clientWidth,G=p.clientHeight,p.$48b=i,p.$49b=G,E.setCanvas(p,i,G)}var z=P(H,".contextmenu-item-icon");for(F=0;F<z.length;F++){var U=z[F];i=U.clientWidth,G=U.clientHeight,U.$48b=i,U.$49b=G,E.setCanvas(U,i,G)}}},validateImpl:function(){var s,D,R,y=this,u=y._view;if(y.isShowing()){var V=P(u,".check-prefix");for(R=0;R<V.length;R++){var N=V[R];s=N.$48b,D=N.$49b,s&&D&&y.$46b(N,M.contextMenuCheckIcon,s,D)}var r=P(u,".radio-prefix");for(R=0;R<r.length;R++){var t=r[R];s=t.$48b,D=t.$49b,s&&D&&y.$46b(t,M.contextMenuRadioIcon,s,D)}var Z=P(u,".contextmenu-item-icon");for(R=0;R<Z.length;R++){var w=Z[R];s=w.$48b,D=w.$49b,s&&D&&y.$46b(w,M.getImage(w.$50b),s,D,w._item)}}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);