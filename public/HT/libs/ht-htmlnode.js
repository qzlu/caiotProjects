!function(H){"use strict";var A="ht",m=H[A],Y=function(){return document},o=function(){return Y().body},S=function(a,R,j){a.style.setProperty(R,j,null)},v=function(Z){return Y().createElement(Z)},N=function(){return v("div")},f=function(){var m=v("canvas");return m},d=function(u,r){S(u,"-webkit-transform",r),S(u,"-ms-transform",r),S(u,"transform",r)},P=function(I,c){S(I,"-webkit-transform-origin",c),S(I,"-ms-transform-origin",c),S(I,"transform-origin",c)},k=function(N,n){N.appendChild(n)},w=function(p,P){p.removeChild(P)},a=H.parseInt,h=m.Default,s=h.eventListenerOptionsFalse,g=(h.eventListenerOptionsTrue,function(d,i,l,G){d.addEventListener(i,l,G?s:s)}),L=h.getInternal(),y=Math.PI,e="white-space",u="visibility",Q="left",V="top",t="width",T="height",W="position",M="display",Z="z-index",x="px",F="0 0",_="absolute",$="visible",i="hidden",R="none",c="block",j="nowrap",I="rgba(0, 0, 0, 0.005)";h.setImage("node_dragger","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAN9JREFUeNrsV9sNhDAMKyzQVdgARmGzrMJNUFZhAh6nfkVcG9PQgHSR8lEksJs6pnGuLCimSRzAa0yyBK9O4gy8GokU+O0kJOAwiQYg0LP1xNYDW3+0CfBYNb7VOuN4LAGpiOaYUhFDas9F2NPHDELNENJqaHgBgSQJ3ufakfQJqckERcOiK+Ae1FGWBNKGh9oX5WPpLpdNYfffijbsxTHh7VKP7388n1g1h7OKUoUuyGpJakQEuhwkZAKcDXVOdWcrOrL/feBVBHI/q8fcjE1nA9PpyHQ+NJ2Qi8A3AQYAOtS27fCoRY0AAAAASUVORK5CYII=");var D=m.graph.GraphView.prototype,l=D._42;D.adjustHtmlNodeIndex=!0,D._42=function(o,c){if(l.call(this,o,c),this.adjustHtmlNodeIndex)for(var j=this.getDataModel()._datas._as,X=j.length,V=1,O=0;X>O;O++){var b=j[O];if(b instanceof B){var K=this.getDataUI(b);S(K.$2f,Z,V+""),S(K.$3f,Z,V+1+""),V+=2}}};var U=m.HtmlNodeUI=function(Z,l){var z=this;U.superClass.constructor.call(z,Z,l);var B=z.$2f=N(),K=z.$3f=f();S(B,W,_),S(B,u,i),S(B,e,j),K.draggable=!1,S(K,W,_),S(K,M,R),P(K,F),g(B,"change",function(g){var L=g.target,e=L.bind||L.getAttribute("bind"),b=L.type&&"checkbox"===L.type?L.checked:L.value,T=l.getContext();e&&T&&(T[e]=b,z.$4f=JSON.stringify(T))}),["mousedown","touchstart","keydown","mousewheel","DOMMouseScroll"].forEach(function(b){g(B,b,this.$9f.bind(this))},z)};h.def(U,L.ui().NodeUI,{_visible:!0,$11f:function(){var G=this,C=G.$3f,i=G._data,Y=i.getDraggerImageWidth(),f=i.getDraggerImageHeight(),v=i.getDraggerImage(),U=L.initContext(C);U.beginPath(),L.setCanvas(C,Y,f),L.translateAndScale(U,0,0,1),U.clearRect(0,0,Y,f),h.drawImage(U,h.getImage(v),0,0,Y,f),U.restore()},_80o:function(w){U.superClass._80o.call(this,w);var o=this,h=o._data,f=h._padding,m=2*f,z=o.$2f,J=o.$3f,C=o.gv,F=C.getZoom(),X=C.getTranslateX(),D=C.getTranslateY(),O=C.getView(),s=o._83o,G=h._width,l=h._height,E=s.position,q=s.rotation,e=(G-m)/h.$5f*F,p=(l-m)/h.$6f*F,g=o._html,B=h._html,L=h.getHtmlType();if("html"===L){var j=h.getContext()||{},A=o.$4f,K=h.$10f,H=JSON.stringify(j);g&&A&&g===B&&A===H||(o.$4f=H,o._html=B,z.innerHTML=K?K(j):B)}else if(null!=L){var v=h.getHtml();"ht"===L&&(v=v.getView()),g&&g===v&&z.contains(g)||(o._html=v,z.innerHTML="",k(z,v))}if(!z.parentNode){var n=C.$1f;if(!n){var Y=N();S(Y,W,_),S(Y,Z,"0"),n=C.$1f=Y;var r=C._canvas.nextSibling;r?O.insertBefore(Y,r):k(O,Y)}k(n,z),k(n,J),h.onContentInitialized&&h.onContentInitialized(z)}if(h._scalable){var P=h.$5f,b=h.$6f;d(z,"rotate("+180*(q/y)+"deg) scale("+e+","+p+")"),S(z,t,""),S(z,T,""),S(z,Q,(E.x-P/F/2)*F+X+x),S(z,V,(E.y-b/F/2)*F+D+x)}else{var jj=a(z.style.width),xb=a(z.style.height),gi=a((G-m)*F),Fg=a((l-m)*F),Si="100%",kg=z.children[0];S(kg,t,Si),S(kg,T,Si),(jj!==gi||xb!==Fg)&&(S(z,t,gi+x),S(z,T,Fg+x),"ht"===L&&B.invalidate()),d(z,"rotate("+180*(q/y)+"deg)"),S(z,Q,(E.x-gi/F/2)*F+X+x),S(z,V,(E.y-Fg/F/2)*F+D+x)}var _m=o.dragRect;C.isMovable(h)&&C.isSelected(h)&&_m?(w.save(),w.fillStyle=I,w.fillRect(_m.x,_m.y,_m.width,_m.height),w.restore(),S(J,Q,_m.x*F+X+x),S(J,V,_m.y*F+D+x),d(J,"scale("+F+","+F+")"),S(J,M,c),o.$11f()):S(J,M,R),S(z,u,this._visible?$:i)},dispose:function(){var Y=this.gv.$1f;this.$2f.parentNode===Y&&Y.removeChild(this.$2f),this.$3f.parentNode===Y&&Y.removeChild(this.$3f)},_84o:function(E){this._visible=E,S(this.$2f,u,E?$:i),S(this.$3f,M,E?c:R)},_3O:function(){var g=this,T=g.gv,A=g._data;U.superClass._3O.call(g);var b=A.getRect();T.isEditable(A)&&(g.dragRect={x:b.x+b.width+A._padding,y:b.y+10,width:A.getDraggerImageWidth(),height:A.getDraggerImageHeight()},g._68o(g.dragRect))},rectIntersects:function(t){var H=this._79o();return m.Default.intersection(H,t)?!0:void 0},$9f:function($){var i=this.gv,I=this._data;i.sm().contains(I)&&$.stopPropagation()}});var B=m.HtmlNode=function(){B.superClass.constructor.call(this)};m.Default.def(B,m.Node,{ms_ac:["html","context","scalable","padding","draggerImage","draggerImageWidth","draggerImageHeight"],_padding:m.Default.isTouchable?12:6,_image:null,_scalable:!0,_draggerImage:"node_dragger",_draggerImageWidth:20,_draggerImageHeight:20,setHtml:function(f){var X=this,i=X._html;X._html=f,"html"===X.getHtmlType()&&"Handlebars"in H&&(X.$10f=Handlebars.compile(f)),X.$13f(),X.fp("html",i,f)},setContext:function(X){var C=this,F=C._context;C._context=X,C.fp("context",F,X),C.$13f()},setScalable:function(x){var Q=this,M=Q._scalable;Q._scalable=x,Q.fp("scalable",M,x),Q.$13f()},getHtmlType:function(){var w=this._html;return w?"string"==typeof w?"html":w.getView?"ht":"dom":null},$13f:function(){var K=this,D=K._html,E=K.$10f;if(D){var F=N(),c=!1,v=K.getHtmlType();if(S(F,W,_),S(F,e,j),S(F,u,i),"html"===v?(F.innerHTML=E?E(K.getContext()||{}):D,c=!0):"ht"===v?(k(F,D.getView()),c=!0):"dom"===v&&(k(F,D),c=!0),c){var C=2*K._padding;k(o(),F),K.$5f=F.scrollWidth,K.$6f=F.scrollHeight,K._width=K.$5f+C,K._height=K.$6f+C,K._originWidth=K._width,K._originHeight=K._height,w(o(),F)}}},getUIClass:function(){return m.HtmlNodeUI}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);