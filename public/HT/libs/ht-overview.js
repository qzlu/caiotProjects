!function(z,b){"use strict";var E="ht",U=E+".graph.",Y=z[E],V=Y.graph,l=Y.Default,m=Y.Color,d=null,M="px",X=l.getInternal(),v=X.getPinchDist,t=l.preventDefault,i=l.getTouchCount,$=l.startDragging;X.addMethod(l,{overviewBackground:m.widgetBackground,overviewMaskBackground:m.transparent,overviewContentBorderColor:m.widgetBorder,overviewContentBackground:m.background},!0),V.Overview=function(z){var x=this,K=x._view=X.createView(1,x);x._canvas=X.createCanvas(K),K.style.background=l.overviewBackground,K.appendChild(x._mask=X.createDiv()),x.setGraphView(z),x.addListeners()},l.def(U+"Overview",b,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate","fixToRect"],_autoUpdate:!0,_fixToRect:!1,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:l.overviewMaskBackground,_contentBorderColor:l.overviewContentBorderColor,_contentBackground:l.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(b){var q=this;if(q.gv!==b){var N=q.gv;q.gv=b,N&&(N.removeViewListener(q.handleGraphViewChanged,q),N.ump(q.handleGraphViewPropertyChanged,q)),b&&(b.addViewListener(q.handleGraphViewChanged,q),b.mp(q.handleGraphViewPropertyChanged,q)),q.fp("graphView",N,b),q.redraw()}},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(){this.redraw()},handleGraphViewChanged:function(l){this._autoUpdate&&"validate"===l.kind&&this.redraw()},handleGraphViewPropertyChanged:function(u){("canvasBackground"===u.property||this.getFixToRect()&&("zoom"===u.property||"translateX"===u.property||"translateY"===u.property))&&this.redraw()},redraw:function(){var D=this;D._redraw||(D._redraw=1,D.iv(50))},validateImpl:function(){var B=this,p=B.gv,q=B._canvas,$=B.getWidth(),h=B.getHeight(),Y=B._redraw;if(p){var j=B._mask,e=j.style,w=p.getViewRect(),g=this.getFixToRect(),f=g?"boolean"==typeof g?p.getContentRect():g:p.getScrollRect(),b=f.x,i=f.y,C=f.width,s=f.height,I=B._rate=Math.max(C/$,s/h),A=B._x=($-C/I)/2,m=B._y=(h-s/I)/2;if(0!==w.width&&0!==w.height||B.hasRetry||(l.callLater(B.iv,B,d),B.hasRetry=!0),($!==q.clientWidth||h!==q.clientHeight)&&(X.setCanvas(q,$,h),Y=1),X.isSameRect(f,B._scrollRect)||(B._scrollRect=f,Y=1),Y){var o=X.initContext(q),V=p.getDataModel(),n=V.getBackground()||B._contentBackground,z=B._contentBorderColor,W=l.devicePixelRatio;o.clearRect(0,0,$*W,h*W);var Z=V.getBackground()&&V.a("width")>0&&V.a("height")>0;n&&!Z&&X.fillRect(o,A*W,m*W,C/I*W,s/I*W,n),X.translateAndScale(o,-b/I+A,-i/I+m,1/I),p._42(o),o.restore(),z&&X.drawBorder(o,z,A*W,m*W,C/I*W,s/I*W)}e.background=B._maskBackground,e.left=A+(w.x-b)/I+M,e.top=m+(w.y-i)/I+M,e.width=w.width/I+M,e.height=w.height/I+M,B._redraw=null}else if(Y){var o=X.initContext(q);o.clearRect(0,0,$,h),o.restore(),B._redraw=null}},center:function(i){var Q=this,D=Q.gv;if(D){var T=D._zoom,I=D._29I,b=Q._rate,o=Q._scrollRect,$=l.getLogicalPoint(i,Q._canvas),t=o.x+($.x-Q._x)*b,z=o.y+($.y-Q._y)*b;D.setTranslate((I.width/2-t)*T,(I.height/2-z)*T)}},handle_mousedown:function(J){this.handle_touchstart(J)},handleWindowMouseUp:function(r){this.handleWindowTouchEnd(r)},handleWindowMouseMove:function(C){this.handleWindowTouchMove(C)},handle_mousewheel:function(w){this.handleScroll(w,w.wheelDelta)},handle_DOMMouseScroll:function(I){2===I.axis&&this.handleScroll(I,-I.detail)},handleScroll:function(x,D){if(t(x),this.gv){var L=this.gv;D>0?L.scrollZoomIn():0>D&&L.scrollZoomOut()}},handle_touchstart:function(U){if(t(U),this.gv&&l.isLeftButton(U)){var w=this,B=w.gv,F=i(U);1===F?l.isDoubleClick(U)&&B.isResettable()?B.reset():(w.center(U),$(w,U)):2===F&&(w._dist=v(U),$(w,U))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(y){if(this.gv){var O=this,G=O._dist,x=i(y);1===x?O.center(y):2===x&&G!=d&&O.gv.handlePinch(d,v(y),G)}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);