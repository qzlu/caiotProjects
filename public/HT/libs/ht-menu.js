!function(C,u){"use strict";var q="ht",B=C[q],A="innerHTML",P="className",w=null,E="px",x=B.Default,U=x.getInternal(),T="0",L=function(){return document},j=function(x){return L().createElement(x)},I=function(){return j("canvas")},$=function(Q,A,_){Q.style.setProperty(A,_,w)},a=function(A,O,b){x.def(B.widget[A],O,b)},O=function(Y,l){Y.appendChild(l)},K=function(R,T){R.removeChild(T)},s=x.eventListenerOptionsFalse,b=(x.eventListenerOptionsTrue,function(B,x,V,e){B.addEventListener(x,V,e?s:s)}),i=function(K,u,L,c){K.removeEventListener(u,L,c?s:s)},H=x.isTouchable;U.addMethod(x,{menuLabelFont:(H?"16":"13")+"px arial, sans-serif",menuLabelColor:"#000",menuBackground:"#F0EFEE",menuHoverBackground:"#648BFE",menuHoverLabelColor:"#fff",menuSeparatorWidth:1,menuSeparatorColor:"#999"},!0),B.widget.Menu=function(e){var M=this,g=M._view=U.createView(null,M),c=M.$1g=new B.widget.ContextMenu,d=j("ul");c._r=!0,c._view[P]+=" ht-widget-dropdownmenu",g[P]="ht-widget-menu",d[P]="header",$(g,"margin",T),$(g,"padding",T),$(g,"background",x.menuBackground),$(g,"-webkit-user-select","none"),$(g,"-moz-user-select","none"),$(g,"user-select","none"),$(g,"text-align","left"),$(g,"border-bottom",x.menuSeparatorWidth+"px solid "+x.menuSeparatorColor),$(g,"cursor","default"),$(g,"overflow","auto"),$(g,"white-space","nowrap"),$(g,"font",x.menuLabelFont),$(g,"color",x.menuLabelColor),$(g,"box-sizing","border-box"),$(g,"-moz-box-sizing","border-box"),$(d,"list-style","none"),$(d,"margin",T),$(d,"padding",T),$(d,"display","inline-block"),O(g,d),M.setItems(e),M.$2g=function(w){M.$3g(w)},M.$4g=function(d){M.$5g(d)},M.$6g=function(k){M.$7g(k)},M.$8g=function(e){M.$9g(e)},M.$9b=function(A){M.$10g(A)},M._autoShow=!0,M.setAutoShow(!1),c.afterHide=function(){M.$11g()},c.afterShow=function(){M.$12g()},i(L(),"keydown",c.$3b),M.$3b=function(E){M.$13g(E)},M.invalidate()},a("Menu",u,{_items:w,$14g:x.menuHoverBackground,$15g:x.menuHoverLabelColor,$16g:{},_enableGlobalKey:!1,ms_v:1,$21g:"smallicons",$22g:0,$23g:0,$24g:"left",getDropDownMenu:function(){return this.$1g},setLayout:function(c){var _=this;if(_.$21g=c,_.setItems(_._items),"largeicons"===c){for(var G=_._view.querySelectorAll(".header-item"),Y=0,H=0;H<G.length;H++){var X=G[H];Y=Math.max(Y,X.clientWidth)}for(var H=0;H<G.length;H++){var X=G[H];$(X,"min-width",Y+E)}}this.invalidate()},getLayout:function(){return this.$21g},setHeaderItemHGap:function(d){this.$22g=d;for(var s=this._view.querySelectorAll(".header-item"),l=0;l<s.length;l++){var q=s[l];$(q,"margin-left",d+E),$(q,"margin-right",d+E)}},getHeaderItemHGap:function(){return this.$22g},setHeaderItemVGap:function(_){this.$23g=_;for(var w=this._view.querySelectorAll(".header-item"),g=0;g<w.length;g++){var J=w[g];$(J,"margin-top",_+E),$(J,"margin-bottom",_+E)}},getHeaderItemVGap:function(){return this.$24g},setHeaderItemAlign:function(B){this.$24g=B,$(this._view,"text-align",B)},getHeaderItemAlign:function(){return this.$23g},enableGlobalKey:function(){var S=this,P=S._enableGlobalKey;P===!1&&(b(L(),"keydown",S.$3b),S._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,i(L(),"keydown",this.$3b)},setHoverBackground:function(n){this.$14g=n},setHoverColor:function(A){this.$15g=A},setItems:function(l){var f=this,C=f._view,H=f.$21g;if(f._items=l,C.children[0][A]="",f.$16g={},l&&l.length){for(var T=C.children[0],e=0,Y=L().createDocumentFragment();e<l.length;e++){var z=l[e],E=j("li"),w=j("span");if(z.icon){var R=I();R[P]="menu-item-icon","smallicons"===H?($(R,"height","1.2em"),$(R,"width","1.2em"),$(R,"vertical-align","middle")):($(R,"height","32px"),$(R,"width","32px"),$(R,"display","block"),$(R,"margin","0 auto")),R.$20g=z.icon,O(E,R)}E[P]="header-item",$(E,"display","inline-block"),$(E,"vertical-align","top"),$(E,"padding","0 1.2em"),$(E,"line-height","1.8em"),"largeicons"===H&&$(E,"text-align","center"),$(E,"background-color","rgba(0,0,0,0)"),E.setAttribute("data-index",e),f.$16g[e]=z.items,w[A]=z.label,"iconsonly"!==H&&O(E,w),O(Y,E)}O(T,Y)}},showDropdownMenu:function(f){var c=this,$=c.$16g[f],t=c.$1g,l=c._view.children[0].children[f],V=c.$17g;if(l&&l!==V){V&&c.hideDropdownMenu();var U=l.getBoundingClientRect(),J=x.getWindowInfo();c.$17g=l,t.setItems($),t.show(U.left+J.left,U.top+U.height+J.top,!1)}},hideDropdownMenu:function(){this.$1g.hide()},getItemByProperty:function(x,p){var n=this,l=n._items;return l&&0!==l.length?n.$1g.getItemByProperty(x,p,l):w},$12g:function(){var x=this,P=x.$17g;P.style.background=x.$14g,P.style.color=x.$15g,x._autoShow||b(L(),H?"touchstart":"mousedown",x.$9b)},$11g:function(){var s=this,Z=s.$17g;Z&&(Z.style.background="",Z.style.color="",s.$17g=w),i(L(),H?"touchstart":"mousedown",s.$9b)},$10g:function(s){var g=this,M=g._view,W=g.$1g,K=M.children[0];!L().body.contains(M)||K.contains(s.target)||W._view.contains(s.target)||g.hideDropdownMenu()},$13g:function(V){var Y=this,k=Y.$1g;L().body.contains(Y._view)&&k.$13b.$4b.call(k.$13b,V,Y._items)},setAutoShow:function(s){var j=this,x=j.$1g,F=j._view;j._autoShow!==s&&(j._autoShow?(i(F,"mouseover",j.$2g),i(F,"mouseout",j.$4g),i(x._view,"mouseout",j.$4g),H||(b(F,"mouseover",j.$8g),b(F,"mouseout",j.$8g)),b(F,H?"touchstart":"mousedown",j.$6g)):(i(F,"mouseover",j.$8g),i(F,"mouseout",j.$8g),i(F,H?"touchstart":"mousedown",j.$6g),i(L(),H?"touchstart":"mousedown",j.$9b),H||(b(F,"mouseover",j.$2g),b(F,"mouseout",j.$4g),b(x._view,"mouseout",j.$4g))),j._autoShow=s)},$3g:function(X){var S=this,h=S._view.children[0],m=X.target;if(h!==m&&h.contains(m)){for(;"header-item"!==m[P];)m=m.parentNode;S.showDropdownMenu(m.getAttribute("data-index"))}},$5g:function(N){var A=this,m=A._view.children[0],r=A.$1g,W=N.target,l=N.relatedTarget;!m.contains(W)&&!r._view.contains(W)||m.contains(l)||r._view.contains(l)||A.hideDropdownMenu()},$7g:function(n){n.preventDefault();var s=this,F=s._view.children[0],W=s.$1g,j=n.target;if(x.isLeftButton(n)&&F!==j&&F.contains(j))if(H){for(;"header-item"!==j[P];)j=j.parentNode;var k=j.getAttribute("data-index"),W=s.$1g,V=s._view.children[0].children[k],T=s.$17g;W.isShowing()&&s.hideDropdownMenu(),V!==T&&s.showDropdownMenu(k)}else if(W.isShowing())s.hideDropdownMenu();else{for(;"header-item"!==j[P];)j=j.parentNode;s.showDropdownMenu(j.getAttribute("data-index"))}},$9g:function(O){var W=this,k=W._view,R=W.$1g,i=O.target;if(k.contains(i)){for(var z=k.querySelectorAll(".header-item"),N=w,g=0;g<z.length;g++){var X=z[g];X.style.background="",X.style.color="","mouseover"===O.type?X.contains(i)&&(N=X):"mouseout"===O.type&&R.isShowing()&&W.$17g===X&&(N=X)}R.isShowing()&&(N||(N=W.$17g),W.showDropdownMenu(N.getAttribute("data-index"))),N&&(N.style.background=W.$14g,N.style.color=W.$15g)}},getShowingMenuIndex:function(){var r=this.$17g;return r?r.getAttribute("data-index"):-1},addTo:function(y){var p=this,i=p._view;O(y,i),p.invalidate()},dispose:function(){var E=this,Q=E._view,V=E.$1g;Q&&(E._autoShow?(i(Q,"mouseover",E.$2g),i(Q,"mouseout",E.$4g),i(V._view,"mouseout",E.$4g)):(i(Q,"mouseover",E.$8g),i(Q,"mouseout",E.$8g),i(Q,H?"touchstart":"mousedown",E.$6g),i(L(),H?"touchstart":"mousedown",E.$9b)),i(L(),"keydown",E.$3b),V.dispose(),Q.parentNode&&K(Q.parentNode,Q),E._view=E.$1g=E.$16g=E._items=E.$17g=E.$2g=E.$4g=E.$6g=E.$8g=E.$9b=E.$3b=w)},$19g:function(d,v,I,l){var N=U.initContext(d);U.translateAndScale(N,0,0,1),N.clearRect(0,0,I,l),x.drawStretchImage(N,x.getImage(v),"fill",0,0,I,l),N.restore()},validateImpl:function(){var F,Z,l,E=this,q=E._view,z=q.querySelectorAll(".menu-item-icon");for(l=0;l<z.length;l++){var b=z[l];F=b.clientWidth,Z=b.clientHeight,F&&Z&&(U.setCanvas(b,F,Z),E.$19g(b,x.getImage(b.$20g),F,Z))}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);