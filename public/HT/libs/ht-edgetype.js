!function(s){"use strict";var Y="ht",_=s[Y],r=Math,V=r.max,E=r.min,G=r.abs,w=r.atan2,M=(r.cos,r.sin,r.ceil),y=_.Default,O=y.getInternal(),B=_.List,f=O.Mat,x=O.getNodeRect,i=O.intersectionLineRect,R=y.getDistance,J=y.setEdgeType,k="left",Q="right",D="top",e="bottom",o="edge.type",Z="edge.gap",N="edge.center",C="edge.extend",l=function(n,B){return x(n,B).width},t=function(z,i){return x(z,i).height},z=function(Y,W){return O.getEdgeAgentPosition(Y,W._40I,W.s("edge.source.position"),W.s("edge.source.offset.x"),W.s("edge.source.offset.y"),W.s("edge.source.anchor.x"),W.s("edge.source.anchor.y"))},T=function(T,f){return O.getEdgeAgentPosition(T,f._41I,f.s("edge.target.position"),f.s("edge.target.offset.x"),f.s("edge.target.offset.y"),f.s("edge.target.anchor.x"),f.s("edge.target.anchor.y"))},u=function(R,Q){var W=R.s(o),H=R.getEdgeGroup();if(H){var l=0;if(H.eachSiblingEdge(function(t){Q.isVisible(t)&&t.s(o)==W&&l++}),l>1)return R.s(Z)*(l-1)/2}return 0},c=function(N,A){var X=N.s(o),v=N.isLooped();if(!N.getEdgeGroup())return v?N.s(Z):0;var z,O=0,C=0,p=0;return N.getEdgeGroup().getSiblings().each(function(R){R.each(function(q){if(q._40I===N._40I&&q.s(o)==X&&A.isVisible(q)){var M=q.s(Z);z?(C+=p/2+M/2,p=M):(z=q,p=M),q===N&&(O=C)}})}),v?C-O+p:O-C/2},U=function(j,V){var G=V.s("edge.corner.radius");return y.toRoundedCorner(j,G)};O.addMethod(_.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),J("boundary",function(Y,N,P,J){J||(N=-N);var b,Q=z(P,Y),Z=T(P,Y),n=x(P,Y._40I),r=x(P,Y._41I),h=new f(w(Z.y-Q.y,Z.x-Q.x)),U=R(Q,Z),A=Q.x,t=Q.y;return b=h.tf(0,N),Q={x:b.x+A,y:b.y+t},b=h.tf(U,N),Z={x:b.x+A,y:b.y+t},b=i(Q,Z,n),b&&(Q={x:b[0],y:b[1]}),b=i(Q,Z,r),b&&(Z={x:b[0],y:b[1]}),{points:new B([Q,Z])}}),J("ripple",function(t,u,L,r){r||(u=-u);var g=z(L,t),y=T(L,t),h=R(g,y),H=E(t.s("edge.offset"),h/2),F=t.s("edge.ripple.size"),k=t.s("edge.ripple.length"),m=t.s("edge.ripple.both"),V=t.s(N),S=t.s("edge.ripple.elevation"),$=new B,I=t.s("edge.ripple.straight")?null:new B,e=new f(w(y.y-g.y,y.x-g.x));r||(S=-S),h-=2*H,k>0&&(F=M(h/k));var j=h/F;I&&I.add(1);for(var O=0;F>O;O++)I&&I.add(3),0===O?$.add({x:H+j*O,y:V?0:u}):$.add({x:H+j*O,y:u}),$.add({x:H+j*O+j/2,y:S+u}),m&&(S=-S);for($.add({x:H+h,y:V?0:u}),O=0;O<$.size();O++){var W=e.tf($.get(O));W.x+=g.x,W.y+=g.y,$.set(O,W)}return{points:$,segments:I}}),J("h.v",function(s,q,Y){q=c(s,Y);var n=new B,_=s.s(N),A=z(Y,s),W=A.x,g=A.y,H=T(Y,s),V=H.x,j=H.y,D=0,r=0,h=V-W,x=j-g;return _||(D=l(Y,s._40I)/2,r=t(Y,s._41I)/2),h>=0&&0>=x?(n.add({x:W+D,y:g+q}),n.add({x:V+q,y:g+q}),n.add({x:V+q,y:j+r})):0>=h&&x>=0?(n.add({x:W-D,y:g+q}),n.add({x:V+q,y:g+q}),n.add({x:V+q,y:j-r})):h>=0&&x>=0?(n.add({x:W+D,y:g+q}),n.add({x:V-q,y:g+q}),n.add({x:V-q,y:j-r})):(n.add({x:W-D,y:g+q}),n.add({x:V-q,y:g+q}),n.add({x:V-q,y:j+r})),U(n,s)}),J("v.h",function(x,e,g){e=c(x,g);var w=new B,R=x.s(N),F=z(g,x),K=F.x,X=F.y,y=T(g,x),G=y.x,o=y.y,p=0,H=0,u=G-K,V=o-X;return R||(p=l(g,x._41I)/2,H=t(g,x._40I)/2),u>=0&&0>=V?(w.add({x:K+e,y:X-H}),w.add({x:K+e,y:o+e}),w.add({x:G-p,y:o+e})):0>=u&&V>=0?(w.add({x:K+e,y:X+H}),w.add({x:K+e,y:o+e}),w.add({x:G+p,y:o+e})):u>=0&&V>=0?(w.add({x:K-e,y:X+H}),w.add({x:K-e,y:o+e}),w.add({x:G-p,y:o+e})):(w.add({x:K-e,y:X-H}),w.add({x:K-e,y:o+e}),w.add({x:G+p,y:o+e})),U(w,x)}),J("ortho",function(J,g,W){var i=new B,X=J.s(N),w=J.s("edge.ortho"),e=J._40I,E=J._41I,V=z(W,J),v=V.x,F=V.y,m=T(W,J),H=m.x,I=m.y,Q=H-v,M=I-F,S=X?0:l(W,e)/2,b=X?0:t(W,e)/2,P=X?0:l(W,E)/2,d=X?0:t(W,E)/2,q=(Q-(S+P)*(Q>0?1:-1))*w,h=(M-(b+d)*(M>0?1:-1))*w;return G(Q)<G(M)?Q>=0&&0>=M?(i.add({x:v+g,y:F-b}),i.add({x:v+g,y:F+h+g-b}),i.add({x:H+g,y:F+h+g-b}),i.add({x:H+g,y:I+d})):0>=Q&&M>=0?(i.add({x:v+g,y:F+b}),i.add({x:v+g,y:F+h+g+b}),i.add({x:H+g,y:F+h+g+b}),i.add({x:H+g,y:I-d})):Q>=0&&M>=0?(i.add({x:v+g,y:F+b}),i.add({x:v+g,y:F+h-g+b}),i.add({x:H+g,y:F+h-g+b}),i.add({x:H+g,y:I-d})):(i.add({x:v+g,y:F-b}),i.add({x:v+g,y:F+h-g-b}),i.add({x:H+g,y:F+h-g-b}),i.add({x:H+g,y:I+d})):Q>=0&&0>=M?(i.add({x:v+S,y:F+g}),i.add({x:v+q+g+S,y:F+g}),i.add({x:v+q+g+S,y:I+g}),i.add({x:H-P,y:I+g})):0>=Q&&M>=0?(i.add({x:v-S,y:F+g}),i.add({x:v+q+g-S,y:F+g}),i.add({x:v+q+g-S,y:I+g}),i.add({x:H+P,y:I+g})):Q>=0&&M>=0?(i.add({x:v+S,y:F+g}),i.add({x:v+q-g+S,y:F+g}),i.add({x:v+q-g+S,y:I+g}),i.add({x:H-P,y:I+g})):(i.add({x:v-S,y:F+g}),i.add({x:v+q-g-S,y:F+g}),i.add({x:v+q-g-S,y:I+g}),i.add({x:H+P,y:I+g})),U(i,J)}),J("flex",function(k,M,f){var V=new B,m=k.s("edge.flex")+u(k,f),R=k.s(N),I=k._40I,a=k._41I,g=z(f,k),W=g.x,X=g.y,A=T(f,k),Z=A.x,c=A.y,C=Z-W,v=c-X,i=R?0:l(f,I)/2,O=R?0:t(f,I)/2,E=R?0:l(f,a)/2,J=R?0:t(f,a)/2,$=C>0?m:-m,h=v>0?m:-m;return G(C)<G(v)?C>=0&&0>=v?(V.add({x:W+M,y:X-O}),V.add({x:W+M,y:X+h+M-O}),V.add({x:Z+M,y:c-h+M+J}),V.add({x:Z+M,y:c+J})):0>=C&&v>=0?(V.add({x:W+M,y:X+O}),V.add({x:W+M,y:X+h+M+O}),V.add({x:Z+M,y:c-h+M-J}),V.add({x:Z+M,y:c-J})):C>=0&&v>=0?(V.add({x:W+M,y:X+O}),V.add({x:W+M,y:X+h-M+O}),V.add({x:Z+M,y:c-h-M-J}),V.add({x:Z+M,y:c-J})):(V.add({x:W+M,y:X-O}),V.add({x:W+M,y:X+h-M-O}),V.add({x:Z+M,y:c-h-M+J}),V.add({x:Z+M,y:c+J})):C>=0&&0>=v?(V.add({x:W+i,y:X+M}),V.add({x:W+$+M+i,y:X+M}),V.add({x:Z-$+M-E,y:c+M}),V.add({x:Z-E,y:c+M})):0>=C&&v>=0?(V.add({x:W-i,y:X+M}),V.add({x:W+$+M-i,y:X+M}),V.add({x:Z-$+M+E,y:c+M}),V.add({x:Z+E,y:c+M})):C>=0&&v>=0?(V.add({x:W+i,y:X+M}),V.add({x:W+$-M+i,y:X+M}),V.add({x:Z-$-M-E,y:c+M}),V.add({x:Z-E,y:c+M})):(V.add({x:W-i,y:X+M}),V.add({x:W+$-M-i,y:X+M}),V.add({x:Z-$-M+E,y:c+M}),V.add({x:Z+E,y:c+M})),U(V,k)}),J("extend.east",function(A,b,q){var $=new B,J=A.s(C)+u(A,q),D=A.s(N),p=z(q,A),d=p.x+(D?0:l(q,A._40I)/2),s=p.y,E=T(q,A),v=E.x+(D?0:l(q,A._41I)/2),r=E.y,n=V(d,v)+J;return s>r?($.add({x:d,y:s+b}),$.add({x:n+b,y:s+b}),$.add({x:n+b,y:r-b}),$.add({x:v,y:r-b})):($.add({x:d,y:s-b}),$.add({x:n+b,y:s-b}),$.add({x:n+b,y:r+b}),$.add({x:v,y:r+b})),U($,A)}),J("extend.west",function(e,h,n){var J=new B,A=e.s(C)+u(e,n),G=e.s(N),i=z(n,e),K=i.x-(G?0:l(n,e._40I)/2),$=i.y,m=T(n,e),v=m.x-(G?0:l(n,e._41I)/2),H=m.y,y=E(K,v)-A;return $>H?(J.add({x:K,y:$+h}),J.add({x:y-h,y:$+h}),J.add({x:y-h,y:H-h}),J.add({x:v,y:H-h})):(J.add({x:K,y:$-h}),J.add({x:y-h,y:$-h}),J.add({x:y-h,y:H+h}),J.add({x:v,y:H+h})),U(J,e)}),J("extend.north",function(Q,d,M){var l=new B,Z=Q.s(C)+u(Q,M),c=Q.s(N),f=z(M,Q),L=f.x,S=f.y-(c?0:t(M,Q._40I)/2),w=T(M,Q),I=w.x,k=w.y-(c?0:t(M,Q._41I)/2),G=E(S,k)-Z;return L>I?(l.add({y:S,x:L+d}),l.add({y:G-d,x:L+d}),l.add({y:G-d,x:I-d}),l.add({y:k,x:I-d})):(l.add({y:S,x:L-d}),l.add({y:G-d,x:L-d}),l.add({y:G-d,x:I+d}),l.add({y:k,x:I+d})),U(l,Q)}),J("extend.south",function(f,k,s){var E=new B,c=f.s(C)+u(f,s),R=f.s(N),m=z(s,f),h=m.x,D=m.y+(R?0:t(s,f._40I)/2),i=T(s,f),M=i.x,P=i.y+(R?0:t(s,f._41I)/2),x=V(D,P)+c;return h>M?(E.add({y:D,x:h+k}),E.add({y:x+k,x:h+k}),E.add({y:x+k,x:M-k}),E.add({y:P,x:M-k})):(E.add({y:D,x:h-k}),E.add({y:x+k,x:h-k}),E.add({y:x+k,x:M+k}),E.add({y:P,x:M+k})),U(E,f)});var I=function(l,I,$,d,E){if(d.sort(function(P,t){var K=P.getSourceAgent()===I?P.getTargetAgent():P.getSourceAgent(),w=t.getSourceAgent()===I?t.getTargetAgent():t.getSourceAgent(),b=K.p(),d=w.p();if($===k||$===Q){if(b.y>d.y)return 1;if(b.y<d.y)return-1}else{if(b.x>d.x)return 1;if(b.x<d.x)return-1}return y.sortFunc(P.getId(),t.getId())}),E){for(var w,V,e,U=l.getSourceAgent(),D=l.getTargetAgent(),t=0;t<d.size();t++){var K=d.get(t);K.getSourceAgent()===U&&K.getTargetAgent()===D||K.getTargetAgent()===U&&K.getSourceAgent()===D?(V||(V=new B),V.add(K,0)):V?(e||(e=new B),e.add(K)):(w||(w=new B),w.add(K))}d.clear(),w&&d.addAll(w),V&&d.addAll(V),e&&d.addAll(e)}var g=d.indexOf(l),z=d.size(),A=l.s(Z);return{side:$,index:g,size:z,offset:-A*(z-1)/2+A*g}},g=function(A,V,k,m,N){var J=V.s(o);return I(V,k,m,k.getAgentEdges().toList(function(x){return A.isVisible(x)&&x.s(o)===J}),N)},n=function(M,F){var a=M.getSourceAgent()===F?M.getTargetAgent():M.getSourceAgent(),p=F.p(),E=a.p(),w=E.x-p.x,T=E.y-p.y;return w>0&&G(T)<=w?Q:0>w&&G(T)<=-w?k:T>0&&G(w)<=T?e:D},X=function(Z,h,i){var B=h.s(o),K=n(h,i);return I(h,i,K,i.getAgentEdges().toList(function(x){return Z.isVisible(x)&&x.s(o)===B&&n(x,i)===K}))},W=function(j,g){var c=j.getSourceAgent()===g,H=c?j.getTargetAgent():j.getSourceAgent(),R=g.p(),Z=H.p();return c?R.y>Z.y?D:e:R.x<Z.x?Q:k},b=function(D,l,r){var d=l.s(o),p=W(l,r);return I(l,r,p,r.getAgentEdges().toList(function(z){return D.isVisible(z)&&z.s(o)===d&&W(z,r)===p}),p===Q||p===e)},P=function(v,A){var w=v.getSourceAgent()===A,B=w?v.getTargetAgent():v.getSourceAgent(),U=A.p(),p=B.p();return w?U.x<p.x?Q:k:U.y>p.y?D:e},F=function(J,E,f){var g=E.s(o),M=P(E,f);return I(E,f,M,f.getAgentEdges().toList(function(C){return J.isVisible(C)&&C.s(o)===g&&P(C,f)===M}),M===Q||M===e)},p=function(O,j,T){var o=O.getSourceAgent(),s=O.getTargetAgent(),C=o.getId()>s.getId(),F=C?s:o,M=C?o:s,c=F.p(),f=M.p(),W=T(j,O,F),J=T(j,O,M),G=O.s(N),y=G?0:l(j,F)/2,h=G?0:l(j,M)/2,i=G?0:t(j,F)/2,r=G?0:t(j,M)/2,E=W.offset,$=J.offset,u=W.side,X=J.side,n=new B;return u===D?(n.add({x:c.x+E,y:c.y-i}),n.add({x:c.x+E,y:f.y+$}),X===k?n.add({x:f.x-h,y:f.y+$}):n.add({x:f.x+h,y:f.y+$})):u===e?(n.add({x:c.x+E,y:c.y+i}),n.add({x:c.x+E,y:f.y+$}),X===k?n.add({x:f.x-h,y:f.y+$}):n.add({x:f.x+h,y:f.y+$})):u===k?(n.add({x:c.x-y,y:c.y+E}),n.add({x:f.x+$,y:c.y+E}),X===e?n.add({x:f.x+$,y:f.y+r}):n.add({x:f.x+$,y:f.y-r})):u===Q&&(n.add({x:c.x+y,y:c.y+E}),n.add({x:f.x+$,y:c.y+E}),X===e?n.add({x:f.x+$,y:f.y+r}):n.add({x:f.x+$,y:f.y-r})),C&&n.reverse(),U(n,O)};J("ortho2",function(w,y,C){var T,f,O=w.s(N),x=w.s("edge.ortho"),E=w.getSourceAgent(),i=w.getTargetAgent(),I=E.getId()>i.getId(),n=I?i:E,G=I?E:i,H=n.p(),L=G.p(),h=X(C,w,n),V=X(C,w,G),j=O?0:l(C,n)/2,q=O?0:t(C,n)/2,$=O?0:l(C,G)/2,J=O?0:t(C,G)/2,A=new B,K=h.offset,o=V.offset,v=h.side;return v===Q?(T=L.y>H.y?-K:K,f=H.x+j+(L.x-$-H.x-j)*x,A.add({x:H.x+j,y:H.y+K}),A.add({x:f+T,y:H.y+K}),A.add({x:f+T,y:L.y+o}),A.add({x:L.x-$,y:L.y+o})):v===k?(T=L.y>H.y?-K:K,f=H.x-j-(H.x-j-L.x-$)*x,A.add({x:H.x-j,y:H.y+K}),A.add({x:f-T,y:H.y+K}),A.add({x:f-T,y:L.y+o}),A.add({x:L.x+$,y:L.y+o})):v===e?(T=L.x>H.x?-K:K,f=H.y+q+(L.y-J-H.y-q)*x,A.add({x:H.x+K,y:H.y+q}),A.add({x:H.x+K,y:f+T}),A.add({x:L.x+o,y:f+T}),A.add({x:L.x+o,y:L.y-J})):v===D&&(T=L.x>H.x?-K:K,f=H.y-q-(H.y-q-L.y-J)*x,A.add({x:H.x+K,y:H.y-q}),A.add({x:H.x+K,y:f-T}),A.add({x:L.x+o,y:f-T}),A.add({x:L.x+o,y:L.y+J})),I&&A.reverse(),U(A,w)},!0),J("flex2",function(f,q,g){var m,F=f.getSourceAgent(),$=f.getTargetAgent(),S=F.getId()>$.getId(),G=S?$:F,v=S?F:$,P=G.p(),o=v.p(),s=X(g,f,G),A=X(g,f,v),I=f.s(N),J=f.s("edge.flex")+(s.size-1)/2*f.s(Z),V=I?0:l(g,G)/2,i=I?0:t(g,G)/2,w=I?0:l(g,v)/2,R=I?0:t(g,v)/2,n=new B,j=s.offset,T=A.offset,r=s.side;return r===Q?(m=o.y>P.y?-j:j,n.add({x:P.x+V,y:P.y+j}),n.add({x:P.x+V+J+m,y:P.y+j}),n.add({x:o.x-w-J+m,y:o.y+T}),n.add({x:o.x-w,y:o.y+T})):r===k?(m=o.y>P.y?-j:j,n.add({x:P.x-V,y:P.y+j}),n.add({x:P.x-V-J-m,y:P.y+j}),n.add({x:o.x+w+J-m,y:o.y+T}),n.add({x:o.x+w,y:o.y+T})):r===e?(m=o.x>P.x?-j:j,n.add({x:P.x+j,y:P.y+i}),n.add({x:P.x+j,y:P.y+i+J+m}),n.add({x:o.x+T,y:o.y-R-J+m}),n.add({x:o.x+T,y:o.y-R})):r===D&&(m=o.x>P.x?-j:j,n.add({x:P.x+j,y:P.y-i}),n.add({x:P.x+j,y:P.y-i-J-m}),n.add({x:o.x+T,y:o.y+R+J-m}),n.add({x:o.x+T,y:o.y+R})),S&&n.reverse(),U(n,f)},!0),J("extend.north2",function(K,A,S){var V=K.getSourceAgent(),m=K.getTargetAgent(),q=V.getId()>m.getId(),p=q?m:V,L=q?V:m,G=p.p(),b=L.p(),F=g(S,K,p,D),f=g(S,K,L,D,!0),n=K.s(N),o=n?0:t(S,p)/2,j=n?0:t(S,L)/2,v=F.offset,z=f.offset,k=K.s(C)+(F.size-1)/2*K.s(Z),x=E(G.y-o,b.y-j)-k+(G.x<b.x?v:-v),Q=new B;return Q.add({x:G.x+v,y:G.y-o}),Q.add({x:G.x+v,y:x}),Q.add({x:b.x+z,y:x}),Q.add({x:b.x+z,y:b.y-j}),q&&Q.reverse(),U(Q,K)},!0),J("extend.south2",function(x,A,O){var Q=x.getSourceAgent(),n=x.getTargetAgent(),h=Q.getId()>n.getId(),d=h?n:Q,j=h?Q:n,M=d.p(),l=j.p(),c=g(O,x,d,e),X=g(O,x,j,e,!0),p=x.s(N),k=p?0:t(O,d)/2,P=p?0:t(O,j)/2,w=c.offset,E=X.offset,$=x.s(C)+(c.size-1)/2*x.s(Z),J=V(M.y+k,l.y+P)+$+(M.x>l.x?w:-w),u=new B;return u.add({x:M.x+w,y:M.y+k}),u.add({x:M.x+w,y:J}),u.add({x:l.x+E,y:J}),u.add({x:l.x+E,y:l.y+P}),h&&u.reverse(),U(u,x)},!0),J("extend.west2",function(H,v,W){var r=H.getSourceAgent(),z=H.getTargetAgent(),V=r.getId()>z.getId(),y=V?z:r,e=V?r:z,i=y.p(),u=e.p(),O=g(W,H,y,D),q=g(W,H,e,D,!0),t=H.s(N),A=t?0:l(W,y)/2,L=t?0:l(W,e)/2,x=O.offset,Q=q.offset,$=H.s(C)+(O.size-1)/2*H.s(Z),o=E(i.x-A,u.x-L)-$+(i.y<u.y?x:-x),f=new B;return f.add({x:i.x-A,y:i.y+x}),f.add({x:o,y:i.y+x}),f.add({x:o,y:u.y+Q}),f.add({x:u.x-L,y:u.y+Q}),V&&f.reverse(),U(f,H)},!0),J("extend.east2",function(u,Y,n){var f=u.getSourceAgent(),k=u.getTargetAgent(),A=f.getId()>k.getId(),y=A?k:f,R=A?f:k,d=y.p(),F=R.p(),J=g(n,u,y,D),E=g(n,u,R,D,!0),v=u.s(N),j=v?0:l(n,y)/2,$=v?0:l(n,R)/2,p=J.offset,o=E.offset,_=u.s(C)+(J.size-1)/2*u.s(Z),P=V(d.x+j,F.x+$)+_+(d.y>F.y?p:-p),T=new B;return T.add({x:d.x+j,y:d.y+p}),T.add({x:P,y:d.y+p}),T.add({x:P,y:F.y+o}),T.add({x:F.x+$,y:F.y+o}),A&&T.reverse(),U(T,u)},!0),J("v.h2",function(e,y,$){return p(e,$,b)},!0),J("h.v2",function(H,a,_){return p(H,_,F)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);